package util

import (
	"fmt"
	"hyperledger.abchain.org/core/crypto"
	"net/http"
)

func GetAddress(rw web.ResponseWriter, req *web.Request) {
	pkstr := req.PostFormValue("pubkeybuffer")

	pk, err := crypto.DecodeCompactPublicKey(pkstr)
	if err != nil {
		NormalError(rw, fmt.Errorf("decode public key fail: %s", err))
		return
	}

	addr, err := txutil.NewAddress(pk)
	if err != nil {
		NormalError(rw, fmt.Errorf("create addr fail: %s", err))
		return
	}

	NormalEnd(rw, addr.ToString())
}
